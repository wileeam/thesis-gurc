% -*- mode: TeX -*-
% -*- coding: utf-8 -*-

\documentclass[showtrims, oldfontcommands]{kthesis}

\input{configuration/options}

% has to be loaded before some others (after hyperref gives an error)
\usepackage{algorithm}

\usepackage{textcomp}
\usepackage{lmodern}
\usepackage[utf8]{inputenc}
\usepackage[swedish, english, french, spanish]{babel}

\usepackage[svgnames]{xcolor}

\usepackage[type={CC}, lang={english}, modifier={by-nd}, version={3.0}]{doclicense}

% *** disable reset of footnote counter every chapter
\usepackage{chngcntr}
\counterwithout{footnote}{chapter}


% *** enables changing the label in enumerate environments directly
\usepackage{enumitem}

% *** for the boxes in the appendix alfa
\usepackage{framed}

% *** enables full bibliographic entries within text ***
\usepackage{bibentry}
\nobibliography*

% *** citation numbers will be sorted and properly "compressed/ranged" ***
%\usepackage[noadjust]{cite}
% *** allowed for \citeauthor and \citeyear commands ***
\usepackage[numbers, square, sort]{natbib}
\usepackage{usebib}
\bibliographystyle{acm}
\setcitestyle{authoryear,aysep={},open={(},close={)}}
\bibinput{data/bibliography} % <--- the same argument as in \bibliography

\usepackage{lettrine}

\usepackage{booktabs}
\usepackage{multirow}

% \usepackage{adjustbox}
% \usepackage{pdflscape}
\usepackage{rotating}
\usepackage{tabu}

% DEBUG
% *** provides random text to fill up boxes, etc ***
\usepackage{lipsum}
\listfiles

\usepackage[many]{tcolorbox}


\usepackage{mfirstuc}
%\usepackage[single, index, hyperref=true]{acro}
\usepackage[single, index]{utils/acro}

% *** adds a space unless the macro is followed by certain punctuation characters ***
\usepackage{xspace}

% tocloft is already loaded
%\usepackage{tocloft}
% \renewcommand{\cftchapterfont}{\scshape}
% \renewcommand{\cftsecfont}{\bfseries}
% \renewcommand{\cftfigfont}{Figure }
% \renewcommand{\cfttabfont}{Table }
% \renewcommand{\cftsectionpresnum}{SOMETHING }

\graphicspath{{./images/}}
\DeclareGraphicsExtensions{.pdf,.jpeg,.png}


% colored dogear marks
\usepackage[pages=some,contents={},opacity=1.0,scale=1,angle=90]{background}
\usepackage{tikz}

\usepackage{hyperxmp}

%%% P2P %%%
%\usepackage{amssymb}
%\usepackage[pdftex]{graphicx}
%\graphicspath{{./images/}}
%\DeclareGraphicsExtensions{.pdf,.jpeg,.png}
%\usepackage[tight,footnotesize]{subfigure} % old version
%\usepackage{url}
%\hyphenation{op-tical net-works semi-conduc-tor log-in}
%%*** ALIGNMENT PACKAGES ***
%\usepackage{array}
%\usepackage{mdwmath}
%%*** colors ***
% \usepackage{xcolor,colortbl}
% \definecolor{colorRowHeader}{rgb}{0.976471,0.976471,0.976471}
% \definecolor{colorSubLine}{rgb}{0.5,0.5,0.5}
%*** tables ***
%\usepackage{multirow}
\usepackage{booktabs}
%*** code ***
%\usepackage{algorithm}
\usepackage{algpseudocode}
%%% P2P %%%

%%% EI %%%
%\RequirePackage[l2tabu, orthodox]{nag}
%\usepackage{enumitem}
\usepackage{bold-extra}
%\usepackage{amssymb}
%\usepackage{amsmath}
% \usepackage{amsfonts}
\usepackage{bm}
%\usepackage{breqn} %automatic line breaks in formulas. deactivated due to this problem: http://latex-community.org/forum/viewtopic.php?f=46&t=24015&start=10
%\setcounter{tocdepth}{3}
%\usepackage[pdftex]{graphicx}
%\usepackage{url}
%\usepackage{acro} % caused conflicts
%\usepackage{glossaries} % caused errors
%\usepackage{mfirstuc}
\usepackage{xparse}
%\usepackage{booktabs}
%\usepackage{multirow}
%\usepackage{array}
\usepackage{colortbl}
\usepackage{arydshln} % causes pdflatex to hang at umsb.fd
%\usepackage{tikz}
\usepackage{mdframed}
%\usepackage{cleveref} % needs to be loaded after hyperref
\usepackage{calc}
%%% EI %%%

%%% DSS %%%
%introduce \powerset - hint by http://matheplanet.com/matheplanet/nuke/html/viewtopic.php?topic=136492&post_id=997377
\DeclareFontFamily{U}{MnSymbolC}{}
\DeclareSymbolFont{MnSyC}{U}{MnSymbolC}{m}{n}
\DeclareFontShape{U}{MnSymbolC}{m}{n}{
    <-6>  MnSymbolC5
   <6-7>  MnSymbolC6
   <7-8>  MnSymbolC7
   <8-9>  MnSymbolC8
   <9-10> MnSymbolC9
  <10-12> MnSymbolC10
  <12->   MnSymbolC12%
}{}
\DeclareMathSymbol{\powerset}{\mathord}{MnSyC}{180}

% \usepackage[american]{babel}
% \usepackage{graphicx}
% \usepackage{tikz}
% \usepackage{mdframed}
%extended enumerate, such as \begin{compactenum}
%%%% DEBUG
% \usepackage{paralist}
%%%% DEBUG
%put figures inside a text
%\usepackage{picins}
%use
%\piccaptioninside
%\piccaption{...}
%\parpic[r]{\includegraphics ...}
%Text...

%Sorts the citations in the brackets
%\usepackage{cite}

%for easy quotations: \enquote{text}
%%%% DEBUG
% \usepackage{csquotes}
%%%% DEBUG
% \usepackage[T1]{fontenc}

%enable margin kerning
%%%% DEBUG
% \usepackage{microtype}
%%%% DEBUG

%better font, similar to the default springer font
%%%% DEBUG
% \usepackage[%
% rm={oldstyle=false,proportional=true},%
% sf={oldstyle=false,proportional=true},%
% tt={oldstyle=false,proportional=true,variable=true},%
% qt=false%
% ]{cfr-lm}
%%%% DEBUG
%if more space is needed, exchange cfr-lm by mathptmx
%\usepackage{mathptmx}

% \usepackage{acro}
% *** capitalisation config for acronyms ***
% \usepackage{mfirstuc}
% \acsetup{
%     page-ref    = paren,% Seitennummer in Klammern
%     extra-style = comma,% extra-Informationen mit Komma anhängen
%     only-used   = false,% für das Beispiel auch die nicht verwendeten in die Liste aufnehmen
%     sort        = true, % Liste sortieren
%     uc-cmd      = \capitalisewords
% }
% \input{./data/acronyms}

%for demonstration purposes only
%%%% DEBUG
% \usepackage[math]{blindtext}
%%%% DEBUG

% \usepackage[
% pdfauthor={Benjamin Greschbach, Guillermo Rodr\'{i}guez-Cano, Tomas Ericsson and Sonja Buchegger},
% %pdfsubject={},
% pdftitle={Design of a Privacy-preserving Document Submission and Grading System},
% %pdfkeywords={},
% bookmarks=false,
% breaklinks=true,
% colorlinks=true,
% linkcolor=black,
% citecolor=black,
% urlcolor=black,
% %pdfstartpage=19,
% pdfpagelayout=SinglePage
% ]{hyperref}
%enables correct jumping to figures when referencing
% \usepackage[all]{hypcap}

% \usepackage[capitalise,nameinlink]{cleveref}
%Nice formats for \cref
% \crefname{section}{Sect.}{Sect.}
% \Crefname{section}{Section}{Sections}
% \crefname{figure}{Fig.}{Fig.}
% \Crefname{figure}{Figure}{Figures}

% \usepackage{xspace}

%sequence diagrams
%\usepackage{tikz}
%\usetikzlibrary{arrows,shadows}
%\usepackage[underline=false]{pgf-umlsd}

%msc diagrams
%\usepackage{utils/msc5}
\usepackage{utils/msc5}
%%% DSS %%%

\usepackage[explicit]{titlesec}

% == load hyperref last ==
% if you only want the page number to be clickable in tock: linktocpage=true
% make hyperref dumber with hypertexnames=false (http://tex.stackexchange.com/a/6102/120692)
% \usepackage[colorlinks=true, pagebackref=true, linktocpage=true, hypertexnames=false,hidelinks]{hyperref}
\usepackage[backref=page]{hyperref}
\usepackage{bookmark}
\usepackage{cleveref}
\crefname{appsec}{appendix}{appendices}
\crefname{appchp}{appendix}{appendices}
\crefname{artsec}{article}{articles}
\crefname{part}{part}{parts}
\usepackage[all]{hypcap}


% *** capitalisation config for acronyms ***
\acsetup{
    page-ref    = paren,
    extra-style = comma,
    only-used   = false,
    sort        = true,
    uc-cmd      = \capitalisewords,
    list-caps   = true,
    list-heading= none
}

% *** acronyms file loading ***
\input{data/acronyms}


\input{data/kth-bibl}

\newtcolorbox{ppBox}[1][]{
    breakable,
    enhanced,
    skin=enhancedmiddle,
    frame hidden,
    interior hidden,
    title=#1,
    arc=0pt,
    outer arc=0pt,
    top=0pt,
    bottom=0pt,
    boxsep=1mm,
    borderline={1.5pt}{0mm}{black},
    fonttitle=\sffamily\footnotesize,
    fontupper=\sffamily\footnotesize,
    fontlower=\sffamily\footnotesize,
    colframe=black,
    colback=white,
    colbacktitle=white,
    coltitle=black,
    fonttitle=\bfseries,
    boxrule=0pt,
    bottomrule=0pt,
    toprule=0pt,
  % leftrule=3pt,
  % rightrule=3pt,
    titlerule=0pt,
    width=8\linewidth/10,
    valign=center,
}

%%%
% CONFIG: Meta-data properties for PDF and XMP
%
% Notes: Load after kth-bibl (as variables used come from there)
%
\hypersetup{
    pdftitle        = {\thesistitle},
    pdfauthor       = {\thesisauthor},
%    pdfauthortitle={},%
    pdfsubject      = {Wannabe thesis},
%    pdfsubject      = {\thesistype~(\degree),~\department,~\university},
    pdfkeywords     = {\thesiskeywords},
    pdfcreator      = {\thesisauthor~(Supervised~by~\thesissupervisor)},
    pdfproducer     = {\thesisauthor~powered~by~\LaTeX},
%    pdfcontactaddress={},
%    pdfcontactcity={Lentini (SR)},
%    pdfcontactpostcode={},
%    pdfcontactcountry={Sweden},
%    pdfcontactphone={},
    pdfcontactemail={\thesiscontactemail},
%    pdfcontacturl={},
%    pdfcaptionwriter={},
    pdflang={\thesislanguage},
%    pdfcopyright    = {\thesiscopyright},
    pdflicenseurl   = {\thesislicenseurl},
    pdfstartview    = FitB,
    colorlinks=true,
    breaklinks,
    linkcolor={blue},
    citecolor={red},
    urlcolor={blue},
    bookmarks=true,         % show bookmarks bar?
    unicode=false,          % non-Latin characters in Acrobat’s bookmarks
    % hidelinks,
    linktocpage=true,
    hypertexnames=false    
}

% *** 
\input{data/commands}
% ***
\input{data/abbreviations}

\makechapterstyle{myell}{%
  \chapterstyle{veelo}
  \renewcommand*{\chapnumfont}{\normalfont\huge\bfseries}
  \renewcommand*{\chaptitlefont}{\normalfont\Huge\bfseries}
  \settowidth{\chapindent}{\chapnumfont 111}
  \renewcommand*{\chapterheadstart}{\begingroup
    \vspace*{\beforechapskip}%
    \begin{adjustwidth}{}{-\chapindent}%
    \hrulefill
    \smash{\rule{0.4pt}{15mm}}
    \end{adjustwidth}\endgroup}
  \renewcommand*{\printchaptername}{}
  \renewcommand*{\chapternamenum}{}
  \renewcommand*{\printchapternum}{%
    \begin{adjustwidth}{}{-\chapindent}
    \hfill
    \raisebox{10mm}[0pt][0pt]{\chapnumfont \thechapter}%
                              \hspace*{1em}
    \end{adjustwidth}\vspace*{-3.0\onelineskip}}
  \renewcommand*{\printchaptertitle}[1]{%
    \vskip\onelineskip
    \raggedleft {\chaptitlefont ##1}\par\nobreak}}

% http://tex.stackexchange.com/questions/254318/chapter-style-with-tcolorbox/254328
% http://tex.stackexchange.com/questions/301185/modify-fancy-chapter-heading-to-show-chapter-name
% \definecolor{titlebgdark}{RGB}{0,163,243}
% \definecolor{titlebglight}{RGB}{191,233,251}
% \definecolor{titlebgdark}{RGB}{25,84,186}
\definecolor{titlebgdark}{RGB}{98,146,46}
% \definecolor{titlebglight}{RGB}{36,160,216}
\definecolor{titlebglight}{RGB}{176,201,43}
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries}
  {}
  {20pt}
  {%
    \begin{tcolorbox}[
      enhanced,
      colback=titlebgdark,
      boxrule=0.25cm,
      colframe=titlebglight,
      arc=0pt,
      outer arc=0pt,
      leftrule=0pt,
      rightrule=0pt,
      fontupper=\color{white}\sffamily\bfseries\huge,
      enlarge left by=-1in-\hoffset-\oddsidemargin, 
      enlarge right by=-\paperwidth+1in+\hoffset+\oddsidemargin+\textwidth,
      % width=\paperwidth,
      width=\paperwidth+1in,
      height=0.6cm+0.6cm+3\baselineskip,
      valign=center,
      left=1in+\hoffset+\oddsidemargin, 
      % right=\paperwidth-1in-\hoffset-\oddsidemargin-\textwidth,
      right=\paperwidth-1in-\hoffset-\oddsidemargin-\textwidth+1in,
      top=0.6cm, 
      bottom=0.6cm,
      overlay={
        \node[
          fill=titlebgdark,
          draw=titlebglight,
          line width=0.15cm,
          inner sep=0pt,
          text width=1.7cm,
          minimum height=1.7cm,
          align=center,
          font=\color{white}\sffamily\bfseries\fontsize{30}{36}\selectfont
        ] 
        (chapname)
        % at ([xshift=-1in]frame.north east)
        at ([xshift=-1in-1in]frame.north east)
        {\thechapter};
        \node[font=\small,anchor=south,inner sep=2pt] at (chapname.north)
        % {\MakeUppercase\chaptertitlename};
        {};  
      } 
    ]
    #1
    \end{tcolorbox}%
  }
\titleformat{name=\chapter,numberless}[display]
  {\normalfont\huge\bfseries}
  {}
  {20pt}
  {%
    \begin{tcolorbox}[
      enhanced,
      colback=titlebgdark,
      boxrule=0.25cm,
      colframe=titlebglight,
      arc=0pt,
      outer arc=0pt,
      remember as=title,
      leftrule=0pt,
      rightrule=0pt,
      fontupper=\color{white}\sffamily\bfseries\huge,
      enlarge left by=-1in-\hoffset-\oddsidemargin, 
      enlarge right by=-\paperwidth+1in+\hoffset+\oddsidemargin+\textwidth+1in,
      % width=\paperwidth,
      width=\paperwidth+1in,
      height=0.6cm+0.6cm+3\baselineskip,
      valign=center,
      left=1in+\hoffset+\oddsidemargin, 
      % right=\paperwidth-1in-\hoffset-\oddsidemargin-\textwidth,
      right=\paperwidth-1in-\hoffset-\oddsidemargin-\textwidth+1in,
      top=0.6cm, 
      bottom=0.6cm, 
    ]
    #1
    \end{tcolorbox}%
  }
\titlespacing*{\chapter}
  {0pt}{0pt}{10pt}
\makeatother

% Make format of TOC heading same as the one used in the chapter
% http://tex.stackexchange.com/a/19484/120692
\makeatletter
\renewcommand\tableofcontents{%
        \chapter{\contentsname
        \@mkboth{%
           \MakeUppercase\contentsname}{\MakeUppercase\contentsname}}%
        \@starttoc{toc}%
        }
\makeatother

%\chapterstyle{myell}

% http://tex.stackexchange.com/questions/54115/how-to-let-part-stay-solo-page-and-no-page-number
% \makeatletter
% \renewcommand\part{%
%   \if@openright
%     \cleardoublepage
%   \else
%     \clearpage
%   \fi
%   \thispagestyle{empty}%   % Original »plain« replaced by »emptyx
%   \if@twocolumn
%     \onecolumn
%     \@tempswatrue
%   \else
%     \@tempswafalse
%   \fi
%   \null\vfil
%   \secdef\@part\@spart}
% \makeatother

% http://tex.stackexchange.com/questions/159551/customizing-part-style-with-tikz
% \definecolor{mybluei}{RGB}{0,173,239}
% \definecolor{mybluei}{RGB}{25,84,186}
% \definecolor{myblueii}{RGB}{63,200,244}
% \definecolor{myblueiii}{RGB}{199,234,253}
% \definecolor{myblueiii}{RGB}{36,160,216}
\definecolor{bgdark}{RGB}{98,146,46}
\definecolor{bglight}{RGB}{176,201,43}
\renewcommand\partnumfont{% font specification for the number
    % \fontsize{380}{130}\color{myblueii}\selectfont%
    \fontsize{380}{130}\color{bgdark}\sffamily\selectfont%
}

\renewcommand\partnamefont{% font specification for the name "PART"
    % \normalfont\color{white}\scshape\small\bfseries
    \color{white}\sffamily\bfseries\fontsize{30}{36}\selectfont
}

\titleformat{\part}
  {\normalfont\huge\filleft}
  % {\sffamily\bfseries\normalfont\huge\filleft}
  {}
  {20pt}
  {\begin{tikzpicture}[remember picture,overlay]
  \fill[bglight] 
    (current page.north west) rectangle ([yshift=-13cm,xshift=1in]current page.north east);   
  \node[
      fill=bgdark,
      text width=2\paperwidth,
      rounded corners=6cm,
      text depth=18cm,
      anchor=center,
      inner sep=0pt] at (current page.north east) (parttop)
    {\thepart};%
    {};
  \node[
      anchor=south east,
      inner sep=0pt,
      outer sep=0pt] (partnum) at ([xshift=-20pt]parttop.south) 
    {\partnumfont\thepart};
    % {\partnumfont};
  \node[
      anchor=south,
      inner sep=0pt] (partname) at ([yshift=2pt]partnum.south)   
  % {\partnamefont PART};
  {\partnamefont};
  \node[
      anchor=north east,
      align=right,
      inner xsep=10pt] at ([yshift=-1.5cm]partname.east|-partnum.south) 
  % {\parbox{.7\textwidth}{\raggedleft#1}};
  {\parbox{.7\textwidth}{\raggedleft\sffamily\bfseries\Huge\selectfont #1}};
  \end{tikzpicture}%
  }


\makeatletter
\newcommand*{\greek}[1]{%
   \expandafter\@greek\csname c@#1\endcsname
}
\newcommand*{\@greek}[1]{%
   $\ifcase#1\or\alpha\or\beta\or\gamma\or\delta\or\varepsilon
     \or\zeta\or\eta\or\theta\or\iota\or\kappa\or\lambda
     \or\mu\or\nu\or\xi\or o\or\pi\or\varrho\or\sigma
     \or\tau\or\upsilon\or\phi\or\chi\or\psi\or\omega
     \else\@ctrerr\fi$%
}
\makeatother

\newcommand\firstToLow[1]{%
 {%
   \renewcommand{\mfirstucMakeUppercase}{\MakeLowercase}%
   \makefirstuc{#1}%
 }%
}

\makeatletter
\newcommand*{\lcnameref}[1]{%
 \begingroup 
   \let\label\@gobble
   \NR@setref{#1}\lc@thirdoffive{#1}%
  \endgroup
}
\newcommand{\lc@thirdoffive}[5]{\firstToLow{#3}}
\makeatother

% reset footnote counters per chapter (and chapter*)
\makeatletter
\pretocmd{\@schapter}{\setcounter{footnote}{0}}{}{}
\pretocmd{\@chapter}{\setcounter{footnote}{0}}{}{}
\makeatother

% correct case for namerefs, see http://tex.stackexchange.com/questions/1655/correct-case-in-namerefs
\newcommand{\lnameref}[1]{%
\bgroup
\let\nmu\MakeLowercase
\nameref{#1}\egroup}
\newcommand{\fnameref}[1]{%
\bgroup
\def\nmu{\let\nmu\MakeLowercase}%
\nameref{#1}\egroup}

\newcommand{\nmu}{}


\counterwithin*{chapter}{part}

\hyphenation{log-in net-works pro-gram sur-veil-lan-ce}

\begin{document}

%%%
%   INF: Read the following links for the order of the content (and choose)
%        http://site.uit.no/english/writing-style/bookstructure/
%        http://gradschool.unc.edu/academics/thesis-diss/guide/ordercomponents.html
%
\frontmatter
\pagenumbering{alph}
%%%
%   DOC: Cover page (and ISBN, ISRN, etc numbers)
%
\maketitle

%%%
%   CNF: Removing styles (page numbers) until after abstract
%        Note TOC lists content from itself not before
%
\pagestyle{empty}

%%%
%.  DOC: License page
%
\clearpage
\input{data/text/licenses}
\cleardoublepage


%%%
%   DOC: Dedications page
%
% \clearpage
% \input{data/text/dedications}
% \cleardoublepage

\pagenumbering{roman}

\cleardoublepage
\phantomsection
\selectlanguage{english}
\addcontentsline{toc}{chapter}{Abstract}
\chapter*{Abstract}
\renewcommand{\abstractname}{\vspace{-\baselineskip}}
\begin{abstract}
    \label{abstract}
    % What is the problem?
    % Why is it a problem?
    % Why should we care?
    % What are our findings?
    %
    % Fix for bad grupin in lettrine package. See http://tex.stackexchange.com/questions/134371/lettrine-in-abstract-strange-behaviour
    {
    \lettrine{\textcolor[gray]{.25}{P}}{rivacy enhancing technologies}\csname@restorepar\endcsname\everypar{} 
    have proven to be a beneficial area of research aiming at lessening the threats 
    to the privacy of users' personal information in centralised \acl*{is} like 
    \aclp*{osn}. As such, decentralised solutions have been proposed to extend the 
    control that a user has over its data as opposed to the centralised massive 
    collection of personal and sensitive data.\par
    }
    
    The power that the service provider has in centralised \aclp*{is} has been shown 
    to diminish the user's privacy with cases of misuse, censorship or data leakage. 
    Moreover, the disclosures in 2013 of a global surveillance program led by public 
    intelligence institutions in collaboration with some of the service providers 
    of such centralised \aclp*{is} has accelerated the debate on how to take action 
    to counteract the threat to the ``right to be left alone'' as defined by Alan 
    Westin in 1970. 
    
    Decentralisation as a solution to such threat is plausible and commonly used 
    nowadays. However, removing the central authority comes with two main trade-offs, 
    on one side, mimicking the features of the centralised \acl*{is} in a usable 
    way is not trivial. On the other side, the security and privacy threats 
    that the central authority was supervising and taking care of are now a responsibility 
    to be shared among all participants in the decentralised system.
    
    In our thesis, we propose three different solutions to centralised \aclp*{is}
    varying in the degree of achievable security and privacy, and decentralisation. 
    For decentralised \aclp*{is} in general we show an actual implementation of 
    user authentication via standard user-password credentials. Within the realm 
    of decentralised systems we also show a specific example in the domain of \aclp*{dosn} 
    with the implementation of a coordination and cooperation mechanism to organise 
    events. Finally, in generic centralised privacy-preserving systems we show a 
    mechanism to improve one of the aspects of user's privacy, anonymity, in the 
    academic area to submit and grade documents anonymously.
    
    Our solutions are some concrete examples of how privacy as data control, as 
    envisioned by Anita Allen, can be achieved in different degrees and scenarios 
    within centralised and decentralised \aclp*{is}. Nonetheless, we hope that the 
    privacy-preserving protocols we propose can be useful in other scenarios to 
    mitigate the diverse dangers to personal privacy that we are facing nowadays.
    
\end{abstract}
\clearpage

\cleardoublepage
\selectlanguage{swedish}
\chapter*{Sammanfattning}
\renewcommand{\abstractname}{\vspace{-\baselineskip}}
\begin{abstract}
    TODO
\end{abstract}
\clearpage

\cleardoublepage
\selectlanguage{spanish}
\chapter*{Resumen}
\renewcommand{\abstractname}{\vspace{-\baselineskip}}
\begin{abstract}
    TODO
\end{abstract}
\clearpage

\selectlanguage{english}

\pagestyle{headings}
% \pagestyle{ruled}

% \clearpage
% \phantomsection
% \addcontentsline{toc}{chapter}{Acknowledgements}
% \chapter*{Acknowledgements}
% \input{data/text/acknowledgements}
% \cleardoublepage

\clearforchapter
%\addtocontents{toc}{~\hfill\textbf{Page}\par}
\maxtocdepth{subsection}
\tableofcontents
\cleardoublepage

\mainmatter
%\part*{}

%%%
%   DOC: Introduction
%
\cleardoublepage
\chapter{Introduction}
    \label{chapter:thesis:introduction}
\input{data/text/introduction}
\clearpage

%%%
%   DOC: Background
%
\cleardoublepage
\chapter{Background}
    \label{chapter:thesis:background}
\input{data/text/background}
\clearpage

\chapter{Our research problem}
    \label{chapter:thesis:our-research-problem}
\input{data/text/problem}
\clearpage

% TODO: Mention what other authors did?
% TODO: Mention who did some or less writing?
\chapter{Our contributions}
    \label{chapter:thesis:our-contributions}
\renewcommand\thesection{\Alph{section}}
% P2P
\section{\usebibentry{KreitzBGRB12}{title}}
\begingroup\centering
\begin{ppBox}
    \bibentry{KreitzBGRB12}
\end{ppBox}
\endgroup

\subsection{Summary}
TODO: Summarise or insert abstract
% Benny's thesis
% The problem of how to transfer credentials in a usable and secure way from one device to another is one of the concerns of Article B contained in this thesis. The proposed solution emulates the traditional username/password-login paradigm in a decentralized system.

\subsection{Contributions}
    \label{subsection:contributions-p2p}
I contributed actively in the discussions we held for the design of the protocols 
with ideas and improvements, for example, I helped with the formalisation of some 
of the protocols such as the password recovery mechanism. 

\subsection{Changes for the thesis}
TODO: Request B's internal reviewer comments

% EI
\section{\usebibentry{RodriguezCanoGB14}{title}}
\begingroup\centering
\begin{ppBox}
    \bibentry{RodriguezCanoGB14}
\end{ppBox}
\endgroup

\subsection{Summary}
TODO: Summarise or insert abstract

\subsection{Contributions}
I developed, with Benjamin Greschbach, the problem statement as well as the formalisations 
of the security and privacy properties, and the protocols we devised. I also contributed 
with Benjamin in the evaluation of the implementation and the tools we devised.

\subsection{Changes for the thesis}
TODO: Request B's internal reviewer comments

% DSS
\section{\usebibentry{GreschbachREB15}{title}}
\begingroup\centering
\begin{ppBox}
    \bibentry{GreschbachREB15}
\end{ppBox}
\endgroup

\subsection{Summary}
TODO: Summarise or insert abstract
% In such scenario, our proposed protocol guarantees what we defined as ``forward
% unlinkability'' of a document with the author --- a document and its author's identity
% must remain unlinkable even after receiving a grade --- and ``provable linkability''
% of an author with a grade --- the system must guarantee that an author receives
% a grade if and only if the author submitted a document for grading that was actually
% graded.

\subsection{Contributions}
Together with Benjamin Greschbach, I developed the problem statement, the formalisation 
of the security and privacy properties, and the analysis and evaluation of our solution. 
Tomas Ericsson implemented a proof-of-concept of the problem statement and contributed 
actively in the formalisation \cite{Ericsson15}.

%\subsection{Changes for the thesis}

\renewcommand\thesection{\thechapter.\arabic{section}}
\input{data/text/conclusions}


%\chapter{Glossary of acronyms and abbreviations}
\chapter{Glossary of acronyms}
% \acsetup{
%     list-caps   = true,
%     list-heading= none,
%     extra-style = comma,
%     page-ref    = paren % Seitennummer in Klammern
%     % only-used   = false,% für das Beispiel auch die nicht verwendeten in die Liste aufnehmen
%     % uc-cmd      = \capitalisewords
% }

% Reset all acronyms
% \acresetall
% Mark all acronyms as used
% \acuseall
\printacronyms
% \acresetall

% titlesec recommendation to remove the page number (from part pages in this case)
\assignpagestyle{\part}{empty}
\part*{Published articles}
    \label[part]{part:published-articles}
\thispagestyle{empty}
\setcounter{chapter}{0}
\renewcommand\thechapter{\Alph{chapter}}
\renewcommand{\chaptername}{Article}

% *** properties' frame command ***
\newenvironment{propertydef}[1][]{%
	\mdfsetup{%
		frametitle={%
			\tikz[baseline]=(current bounding box.east),outer sep=0pt]
			\node[anchor=east,rectangle,fill=black!15]
			{\strut #1};
		},%
		skipabove=1em,%
%		skipbelow=1em,%
		innerrightmargin=0pt,%
		linecolor=black,%
		linewidth=1.5pt,%
		topline=false,%
		bottomline=false,%
		leftline=true,%
		rightline=false,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax%
	}

\begin{mdframed}[]\relax%
}{\end{mdframed}}

\acresetall
\chapter{\usebibentry{KreitzBGRB12}{title}}
    \label[artsec]{article:thesis:passwords-peer-to-peer}
\input{data/papers/passwords-peer-to-peer.tex}

\acresetall
\chapter{\usebibentry{RodriguezCanoGB14}{title}}
    \label[artsec]{article:thesis:events-invitations-dosns}
\input{data/papers/event-invitations-dosns.tex}

\acresetall
\chapter{\usebibentry{GreschbachREB15}{title}}
    \label[artsec]{article:thesis:document-submission-system}
\input{data/papers/document-submission-system.tex}

\newenvironment{quote_tos}{%
    \definecolor{formalshade}{rgb}{0.95,0.95,1}
    \setlength{\parindent}{0pt}
    \def\FrameCommand{%
        \hspace{1pt}%
        {\color{DarkBlue}\vrule width 2pt}%
        {\color{formalshade}\vrule width 4pt}%
        \colorbox{formalshade}%
    }%
    \MakeFramed{\advance\hsize-\width\FrameRestore}%
    \noindent\hspace{-4.55pt}% disable indenting first paragraph
    \begin{adjustwidth}{}{7pt}%
        \vspace{2pt}\vspace{2pt}%
}
{%
    \vspace{2pt}\end{adjustwidth}\endMakeFramed%
}

\cleardoublepage
% \phantomsection
% \appendix
% \addcontentsline{toc}{part}{Appendices}
\bookmarksetupnext{level=-1}
\input{data/text/appendices}


\cleardoublepage
\bookmarksetupnext{level=-1}
%\chapter*{References}
%\addcontentsline{toc}{chapter}{Bibliography}
\bibliography{data/bibliography}
\clearpage


\cleardoublepage
\chapter*{Colophon}
    \label{chapter:thesis:colophon}
\input{data/text/colophon}
\clearpage

\end{document}
% \endinput

